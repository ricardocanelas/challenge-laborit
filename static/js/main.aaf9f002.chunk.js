(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,a,t){e.exports=t(20)},19:function(e,a,t){},20:function(e,a,t){"use strict";t.r(a);var n=t(1),l=t.n(n),s=t(8),r=t.n(s),c=(t(19),t(6)),d=t(2),o=t(3),u=t(4),i=t(11),m=t(9),v=t(12),h=function(e){return l.a.createElement("div",{className:"dropdown"},l.a.createElement("div",{className:"label"},e.label),l.a.createElement("select",{onChange:function(a){return e.onChange(a.target.value)},value:null===e.value?"":e.value},"loading"===e.status&&l.a.createElement("option",{value:"",disabled:!0},"Loading..."),e.data&&e.data.length&&l.a.createElement("option",{value:"",disabled:!0},"- Select -"),e.data&&e.data.map(function(e){return l.a.createElement("option",{key:e.codigo,value:e.codigo},e.nome)})))},f=t(10),p=t(5),y=function(e){if("none"===e.data.status)return l.a.createElement("div",{className:"vehicle notfound"},"Selecione todos os campos acima.");if("loading"===e.data.status)return l.a.createElement("div",{className:"vehicle loading"},l.a.createElement(f.a,{className:"animate rotate"}));var a=e.data.data,t=a.Marca,n=a.Modelo,s=a.Valor,r=a.AnoModelo,c=a.Combustivel,d=a.CodigoFipe,o=a.MesReferencia,u=e.isFavourite;return l.a.createElement("div",{className:"vehicle"},l.a.createElement("div",{className:"label"},"Dados do ve\xedculo"),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"body"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:"brand"},t),l.a.createElement("div",{className:"model"},n)),l.a.createElement("div",{className:""},l.a.createElement("div",{className:"price"},s),l.a.createElement("div",{className:"ref"},"M\xeas ref.: ",o))),l.a.createElement("div",{className:"footer"},l.a.createElement("div",{className:""},l.a.createElement("div",{className:"fuel tag"},c),l.a.createElement("div",{className:"year tag"},r),l.a.createElement("div",{className:"fipe"},"FIPE: ",d)),l.a.createElement("div",{className:""},l.a.createElement("div",{className:"favourite",onClick:function(a){return e.onFavouriteChange(e.data.data,!e.isFavourite)}},u&&l.a.createElement(p.a,{fill:"red"}),!u&&l.a.createElement(p.b,null))))))},b=function(e){return l.a.createElement("div",{className:"favourite-list"},l.a.createElement("div",{className:"label"},"Favoritos"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{width:"140px"},"Marca"),l.a.createElement("th",null,"Modelo / Ano"),l.a.createElement("th",null,"Pre\xe7o"))),l.a.createElement("tbody",null,0===e.data.length&&l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"3",className:"text-center"},"- sem favoritos -")),e.data.map(function(e){return l.a.createElement("tr",{key:e.id,data:e},l.a.createElement("td",null,e.Marca),l.a.createElement("td",null,e.Modelo," (",e.AnoModelo,")"),l.a.createElement("td",null,e.Valor))}))))},E=new(function(){function e(a){Object(o.a)(this,e),this.history={},this.url_base="https://parallelum.com.br/fipe/api/v1/",this.type=void 0===a?"carros":a}return Object(u.a)(e,[{key:"setType",value:function(e){this.type=e}},{key:"getBrands",value:function(){return fetch(this.url_base+this.type+"/marcas").then(function(e){return e.json()})}},{key:"getModels",value:function(e){return fetch(this.url_base+this.type+"/marcas/"+e+"/modelos").then(function(e){return e.json()})}},{key:"getYears",value:function(e,a){return fetch(this.url_base+this.type+"/marcas/"+e+"/modelos/"+a+"/anos").then(function(e){return e.json()})}},{key:"getVehicle",value:function(e,a,t){return fetch(this.url_base+this.type+"/marcas/"+e+"/modelos/"+a+"/anos/"+t).then(function(e){return e.json()})}}]),e}())("carros"),g="laborit_cars_favourites_v011",N={getStore:function(){var e=localStorage.getItem(g);return e?JSON.parse(e):[]},setStore:function(e){localStorage.setItem(g,JSON.stringify(e))}},j=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={brands:{selected:null,status:"loading",data:[]},models:{selected:null,status:"none",data:[]},years:{selected:null,status:"none",data:[]},vehicle:{status:"none",data:null},favourites:N.getStore()},t.reducer=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return t.setState(function(a){switch(e.type){case"brands_fetched":return Object(d.a)({},a,{brands:{selected:null,data:e.payload,status:"loaded"}});case"models_fetched":return Object(d.a)({},a,{models:{selected:null,data:e.payload,status:"loaded"},vehicle:{data:null,status:"none"}});case"years_fetched":return Object(d.a)({},a,{years:{selected:null,data:e.payload,status:"loaded"},vehicle:{data:null,status:"none"}});case"vehicle_fetched":return Object(d.a)({},a,{vehicle:{data:Object(d.a)({},e.payload,{id:"".concat(a.brands.selected,"-").concat(a.models.selected,"-").concat(a.years.selected)}),status:"loaded"}});case"brands_selected":return Object(d.a)({},a,{brands:Object(d.a)({},a.brands,{selected:e.payload}),models:{selected:null,data:null,status:"loading"},years:{selected:null,data:[],status:"none"},vehicle:{data:null,status:"none"}});case"models_selected":return Object(d.a)({},a,{models:Object(d.a)({},a.models,{selected:e.payload}),years:{selected:null,data:null,status:"loading"},vehicle:{data:null,status:"none"}});case"years_selected":return Object(d.a)({},a,{years:Object(d.a)({},a.years,{selected:e.payload,status:"loaded"}),vehicle:{data:null,status:"loading"}});case"favourite_added":return Object(d.a)({},a,{favourites:[].concat(Object(c.a)(a.favourites),[e.payload])});case"favourite_removed":return Object(d.a)({},a,{favourites:Object(c.a)(a.favourites.filter(function(a){return a.id!==e.payload.id}))});default:return a}},a)},t.handleChange=function(e){return function(a){var n=e.toUpperCase();"BRANDS"===n&&(t.reducer({type:"brands_selected",payload:a}),E.getModels(a).then(function(e){t.reducer({type:"models_fetched",payload:e.modelos})})),"MODELS"===n&&(t.reducer({type:"models_selected",payload:a}),E.getYears(t.state.brands.selected,a).then(function(e){t.reducer({type:"years_fetched",payload:e})})),"YEARS"===n&&(t.reducer({type:"years_selected",payload:a}),E.getVehicle(t.state.brands.selected,t.state.models.selected,a).then(function(e){t.reducer({type:"vehicle_fetched",payload:e})}))}},t.handleFavouriteChange=function(e,a){t.reducer({type:a?"favourite_added":"favourite_removed",payload:e},function(){N.setStore(t.state.favourites)})},t}return Object(v.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.getBrands().then(function(a){e.reducer({type:"brands_fetched",payload:a})})}},{key:"render",value:function(){var e=this.state,a=e.brands,t=e.models,n=e.years,s=e.vehicle,r=e.favourites,c="loaded"===s.status&&!!r.find(function(e){return e.id===s.data.id});return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"logo"},"Laborit Cars"),l.a.createElement("div",{className:"dropdowns"},l.a.createElement(h,{label:"Marca",value:a.selected,onChange:this.handleChange("brands"),data:a.data,status:a.status}),l.a.createElement(h,{label:"Modelo",value:t.selected,onChange:this.handleChange("models"),data:t.data,status:t.status}),l.a.createElement(h,{label:"Ano",value:n.selected,onChange:this.handleChange("years"),data:n.data,status:n.status})),l.a.createElement(y,{data:s,onFavouriteChange:this.handleFavouriteChange,isFavourite:c}),l.a.createElement("hr",null),l.a.createElement(b,{data:r}),l.a.createElement("div",{className:"by"},l.a.createElement("a",{href:"https://github.com/ricardocanelas"},"by RicardoCanelas")))}}]),a}(n.Component);r.a.render(l.a.createElement(j,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.aaf9f002.chunk.js.map